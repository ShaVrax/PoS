<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/usermanagement/usermanagement.css">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <title>User Management</title>
</head>
<body>

    <header>
        <h2>Welcome Admin</h2>
        <div class="search">
            <input type="text" placeholder="Search">
            <i class="ph ph-magnifying-glass"></i>
        </div>
        <button class="signOut">Sign Out<i id="signout" class="ph ph-sign-out"></i></button>
    </header>

    <div class="dropdownmenu">
        <ul id="dropdown">
            <li>
                <a href="/dashboard/dashboard.html" id="dashboard">Dashboard</a>
            </li>
            <li>
                <a href="#">File Maintenance</a>
                <ul class="dropdown">
                    <li><a href="/usermanagement/usermanagement.html" id="userManagement"><i class="ph ph-users-four"></i>User Management</a></li>
                    <li><a href="/manageproducts/manageproducts.html" id="manageProduct"><i class="ph ph-package"></i>Manage Product</a></li>
                    <li><a href="/managecategories/managecategories.html" id="manageCategories"><i class="ph ph-clipboard-text"></i>Manage Categories</a></li>
                    <li><a href="/suppliers/suppliers.html" id="supplier"><i class="ph ph-handshake"></i>Supplier</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Transactions</a>
                <ul class="dropdown">
                    <li><a href="/pointsofsales/pointsofsales.html" id="pointOfSales"><i class="ph ph-desktop-tower"></i>Point of Sales</a></li>
                    <li><a href="/reorder/reorder.html" id="purchaseOrder"><i class="ph ph-archive-box"></i>Purchase Order</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Order</a>
                <ul class="dropdown1">
                    <li><a href="/saleshistory/saleshistory.html" id="salesHistory"><i class="ph ph-clock-clockwise"></i>Sales History</a></li>
                    <li><a href="/salesreport/salesreport.html" id="salesReport"><i class="ph ph-chart-line-up"></i>Sales Report</a></li>
                </ul>
            </li>
        </ul>
    </div>
    
    <section class="hero">
        <!-- <div class="profile">
            <h2>User Management</h2>
            <div class="inputs">
                <div class="input">
                    <h3>User ID: </h3>
                    <input type="text">
                </div>
                <div class="input">
                    <h3>Name: </h3>
                    <input type="text">
                </div>
                <div class="input">
                    <h3>Group: </h3>
                    <input type="text">
                </div>
                <div class="input">
                    <h3>Email: </h3>
                    <input type="text">
                </div>
                <div class="input">
                    <h3>Phone: </h3>
                    <input type="text">
                </div>
                <div class="input">
                    <h3>Password: </h3>
                    <input type="text">
                </div>
            </div>
            <div class="buttons">
                <button id="add">Add</button>
                <button id="Clear">Clear</button>
                <button id="Update">Update</button>
            </div>
        </div> -->
        <h2>User Management</h2>
        <div class="table">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Position</th>
                        <th>Email</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    
                </tbody>
            </table>
        </div>
    </section>

    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
            databaseURL : 'https://pos-project-893cb-default-rtdb.firebaseio.com'
        }

        firebase.initializeApp(firebaseConfig);

        const database = firebase.database();

        let fetchedData = database.ref('email/');
        fetchedData.on('value', (snapshot) => {
            let data = snapshot.val();
            let htmlData = '';
            for(let key in data){
                let value = data[key];
                htmlData += 
                `
                    <tr>
                        <td>${value.name}</td>
                        <td>${value.position}</td>
                        <td>${value.email}</td>
                        <td>
                            <button onclick="updateData('${key}')">Update</button>
                            <button onclick="removeData('${key}')">Delete</button>
                        </td>
                    </tr>
                `;
            }

            let dataContainer = document.querySelector('tbody').innerHTML = htmlData;
        })

        const removeData = (uniqueId) =>{
            database.ref('email/' + uniqueId).remove();
        }

    </script>

    <script src="/usermanagement/usermanagement.html" type="module"></script>

</body>
</html>